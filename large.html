

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Splitting Large Datasets &mdash; OpenDroneMap 0.9.9 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="OpenDroneMap 0.9.9 documentation" href="index.html"/>
        <link rel="next" title="Additional References" href="resources.html"/>
        <link rel="prev" title="OpenDroneMap Outputs" href="outputs.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> OpenDroneMap
          

          
          </a>

          
            
            
              <div class="version">
                0.9.9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation and Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#hardware-recommendations">Hardware Recommendations</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="installation.html#windows">Windows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="installation.html#step-1-check-virtualization-support">Step 1. Check Virtualization Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation.html#step-2-install-requirements">Step 2. Install Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation.html#step-3-check-memory-and-cpu-allocation">Step 3. Check Memory and CPU Allocation</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation.html#step-4-download-webodm">Step 4. Download WebODM</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation.html#step-4-launch-webodm">Step 4. Launch WebODM</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#macos">macOS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="installation.html#id1">Step 1. Check Virtualization Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation.html#id2">Step 2. Install Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation.html#id3">Step 3. Check Memory and CPU Allocation</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation.html#step-4-download-and-launch-webodm">Step 4. Download and Launch WebODM</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#linux">Linux</a><ul>
<li class="toctree-l4"><a class="reference internal" href="installation.html#step-1-install-requirements">Step 1. Install Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation.html#step-2-check-additional-requirements">Step 2. Check Additional Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation.html#step-3-download-and-launch-webodm">Step 3. Download and Launch WebODM</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#basic-commands-and-troubleshooting">Basic Commands and Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#hello-webodm">Hello, WebODM!</a><ul>
<li class="toctree-l3"><a class="reference internal" href="installation.html#running-on-more-than-one-machine">Running on more than one machine</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#creating-high-quality-orthophotos">Creating High Quality Orthophotos</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#calibrating-the-camera">Calibrating the Camera</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#creating-digital-elevation-models">Creating Digital Elevation Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#ground-control-points">Ground Control Points</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#ground-control-points-interface">Ground Control Points Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#using-docker">Using Docker</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorials.html#listing-docker-machines">Listing Docker Machines</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorials.html#accessing-logs-on-the-instance">Accessing logs on the instance</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorials.html#command-line-access-to-instances">Command line access to instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorials.html#cleaning-up-after-docker">Cleaning up after Docker</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#using-odm-from-low-bandwidth-location">Using ODM from low-bandwidth location</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorials.html#what-is-this-and-who-is-it-for">What is this and who is it for?</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorials.html#steps">Steps</a><ul>
<li class="toctree-l4"><a class="reference internal" href="tutorials.html#install">Install</a></li>
<li class="toctree-l4"><a class="reference internal" href="tutorials.html#prep-data-and-project">Prep data and project</a></li>
<li class="toctree-l4"><a class="reference internal" href="tutorials.html#resize-droplet-pull-pin-run-away">Resize droplet, pull pin, run away</a></li>
<li class="toctree-l4"><a class="reference internal" href="tutorials.html#after-it-finishes-assuming-you-survive-that-long">After it finishes (assuming you survive that long)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="arguments.html">Options and Flags</a></li>
<li class="toctree-l1"><a class="reference internal" href="outputs.html">OpenDroneMap Outputs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="outputs.html#point-cloud">Point Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="outputs.html#d-textured-model">3D Textured Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="outputs.html#orthophoto">Orthophoto</a></li>
<li class="toctree-l2"><a class="reference internal" href="outputs.html#dtm-dsm">DTM/DSM</a></li>
<li class="toctree-l2"><a class="reference internal" href="outputs.html#list-of-all-outputs">List of all outputs</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Splitting Large Datasets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#calibrate-images">Calibrate images</a></li>
<li class="toctree-l2"><a class="reference internal" href="#local-split-merge">Local Split-Merge</a></li>
<li class="toctree-l2"><a class="reference internal" href="#distributed-split-merge">Distributed Split-Merge</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#getting-started-with-distributed-split-merge">Getting Started with Distributed Split-Merge</a></li>
<li class="toctree-l3"><a class="reference internal" href="#understanding-the-cluster">Understanding the Cluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="#accessing-the-logs">Accessing the Logs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#autoscaling-clusterodm">Autoscaling ClusterODM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#limitations">Limitations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#acknowledgments">Acknowledgments</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">Additional References</a><ul>
<li class="toctree-l2"><a class="reference internal" href="resources.html#for-users">For Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="resources.html#for-developers">For Developers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="flying.html">Flying tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="multispectral.html">Multispectral Support</a><ul>
<li class="toctree-l2"><a class="reference internal" href="multispectral.html#hardware">Hardware</a></li>
<li class="toctree-l2"><a class="reference internal" href="multispectral.html#usage">Usage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">How to contribute</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#community-forum">Community Forum</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#reporting-bugs">Reporting Bugs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contributing.html#template-for-submitting-bug-reports">Template For Submitting Bug Reports</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#pull-requests">Pull Requests</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OpenDroneMap</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Splitting Large Datasets</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/large.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="splitting-large-datasets">
<h1>Splitting Large Datasets<a class="headerlink" href="#splitting-large-datasets" title="Permalink to this headline">¶</a></h1>
<p>Starting with ODM version <code class="docutils literal notranslate"><span class="pre">0.6.0</span></code> you can split up very large datasets into manageable chunks (called submodels), running the pipeline on each chunk, and then producing merged DEMs, orthophotos and point clouds. The process is referred to as “split-merge”.</p>
<p>Why might you use the split-merge pipeline? If you have a very large number of images in your dataset, split-merge will help make the processing more manageable on a large machine (it will require less memory). If you have many machines all connected to the same network you can also process the submodels in parallel, thus allowing for horizontal scaling and processing thousands of images more quickly.</p>
<p>Split-merge works in WebODM out of the box as long as the processing nodes support split-merge, by enabling the <code class="docutils literal notranslate"><span class="pre">--split</span></code> option when creating a new task.</p>
<div class="section" id="calibrate-images">
<h2>Calibrate images<a class="headerlink" href="#calibrate-images" title="Permalink to this headline">¶</a></h2>
<p>Image calibration is recommended (but not required) for large datasets because error propagation due to image distortion could cause a bowl effect on the models. Calibration instructions can be found at      <a class="reference external" href="tutorials.html#calibrating-the-camera">Calibrate Images</a>.</p>
<div class="figure align-center">
<img alt="image of lens distortion effect on bowling of data" src="_images/msimbasi_bowling.png" />
</div>
<p>Bowling effect on point cloud over 13,000+ image dataset collected by World Bank Tanzania over the flood prone Msimbasi Basin, Dar es Salaam, Tanzania.</p>
</div>
<div class="section" id="local-split-merge">
<h2>Local Split-Merge<a class="headerlink" href="#local-split-merge" title="Permalink to this headline">¶</a></h2>
<p>Splitting a dataset into more manageable submodels and sequentially processing all submodels on the same machine is easy! Just use <code class="docutils literal notranslate"><span class="pre">--split</span></code> and <code class="docutils literal notranslate"><span class="pre">--split-overlap</span></code> to decide the the average number of images per submodels and the overlap (in meters) between submodels respectively</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">ti</span> <span class="o">--</span><span class="n">rm</span> <span class="o">-</span><span class="n">v</span> <span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">project</span><span class="p">:</span><span class="o">/</span><span class="n">datasets</span><span class="o">/</span><span class="n">code</span> <span class="n">opendronemap</span><span class="o">/</span><span class="n">odm</span> <span class="o">--</span><span class="n">project</span><span class="o">-</span><span class="n">path</span> <span class="o">/</span><span class="n">datasets</span> <span class="o">--</span><span class="n">split</span> <span class="mi">400</span> <span class="o">--</span><span class="n">split</span><span class="o">-</span><span class="n">overlap</span> <span class="mi">100</span>
</pre></div>
</div>
<p>If you already know how you want to split the dataset, you can provide that information and it will be used instead of the clustering algorithm.</p>
<p>The grouping can be provided by adding a file named image_groups.txt in the main dataset folder. The file should have one line per image. Each line should have two words: first the name of the image and second the name of the group it belongs to. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">01.</span><span class="n">jpg</span> <span class="n">A</span>
<span class="mf">02.</span><span class="n">jpg</span> <span class="n">A</span>
<span class="mf">03.</span><span class="n">jpg</span> <span class="n">B</span>
<span class="mf">04.</span><span class="n">jpg</span> <span class="n">B</span>
<span class="mf">05.</span><span class="n">jpg</span> <span class="n">C</span>
</pre></div>
</div>
<p>will create 3 submodels. Make sure to pass <code class="docutils literal notranslate"><span class="pre">--split-overlap</span> <span class="pre">0</span></code> if you manually provide a <code class="docutils literal notranslate"><span class="pre">image_groups.txt</span></code> file.</p>
</div>
<div class="section" id="distributed-split-merge">
<h2>Distributed Split-Merge<a class="headerlink" href="#distributed-split-merge" title="Permalink to this headline">¶</a></h2>
<p>ODM can also automatically distribute the processing of each submodel to multiple machines via <a class="reference external" href="https://github.com/OpenDroneMap/NodeODM">NodeODM</a> nodes, orchestrated via <a class="reference external" href="https://github.com/OpenDroneMap/ClusterODM">ClusterODM</a>.</p>
<div class="figure align-center">
<img alt="image of lens distortion effect on bowling of data" src="_images/clusterodm.png" />
</div>
<div class="section" id="getting-started-with-distributed-split-merge">
<h3>Getting Started with Distributed Split-Merge<a class="headerlink" href="#getting-started-with-distributed-split-merge" title="Permalink to this headline">¶</a></h3>
<p>The first step is start ClusterODM</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">ti</span> <span class="o">-</span><span class="n">p</span> <span class="mi">3001</span><span class="p">:</span><span class="mi">3000</span> <span class="o">-</span><span class="n">p</span> <span class="mi">8080</span><span class="p">:</span><span class="mi">8080</span> <span class="n">opendronemap</span><span class="o">/</span><span class="n">clusterodm</span>
</pre></div>
</div>
<p>Then on each machine you want to use for processing, launch a NodeODM instance via</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">ti</span> <span class="o">-</span><span class="n">p</span> <span class="mi">3000</span><span class="p">:</span><span class="mi">3000</span> <span class="n">opendronemap</span><span class="o">/</span><span class="n">nodeodm</span>
</pre></div>
</div>
<p>Connect via telnet to ClusterODM and add the IP addresses/port of the machines running NodeODM</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span>$ telnet &lt;cluster-odm-ip&gt; 8080
Connected to &lt;cluster-odm-ip&gt;.
Escape character is &#39;^]&#39;.
[...]
# node add &lt;node-odm-ip-1&gt; 3000
# node add &lt;node-odm-ip-2&gt; 3000
[...]
# node list
1) &lt;node-odm-ip-1&gt;:3000 [online] [0/2] &lt;version 1.5.1&gt;
2) &lt;node-odm-ip-2&gt;:3000 [online] [0/2] &lt;version 1.5.1&gt;
</pre></div>
</div>
<p>Make sure you are running version <code class="docutils literal notranslate"><span class="pre">1.5.1</span></code> or higher of the NodeODM API.</p>
<p>At this point, simply use the <code class="docutils literal notranslate"><span class="pre">--sm-cluster</span></code> option to enable distributed split-merge</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">ti</span> <span class="o">--</span><span class="n">rm</span> <span class="o">-</span><span class="n">v</span> <span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">project</span><span class="p">:</span><span class="o">/</span><span class="n">datasets</span><span class="o">/</span><span class="n">code</span> <span class="n">opendronemap</span><span class="o">/</span><span class="n">odm</span> <span class="o">--</span><span class="n">project</span><span class="o">-</span><span class="n">path</span> <span class="o">/</span><span class="n">datasets</span> <span class="o">--</span><span class="n">split</span> <span class="mi">800</span> <span class="o">--</span><span class="n">split</span><span class="o">-</span><span class="n">overlap</span> <span class="mi">120</span> <span class="o">--</span><span class="n">sm</span><span class="o">-</span><span class="n">cluster</span> <span class="n">http</span><span class="p">:</span><span class="o">//&lt;</span><span class="n">cluster</span><span class="o">-</span><span class="n">odm</span><span class="o">-</span><span class="n">ip</span><span class="o">&gt;</span><span class="p">:</span><span class="mi">3001</span>
</pre></div>
</div>
</div>
<div class="section" id="understanding-the-cluster">
<h3>Understanding the Cluster<a class="headerlink" href="#understanding-the-cluster" title="Permalink to this headline">¶</a></h3>
<p>When connected via telnet, it is possible to interrogate what is happening on the cluster. For example, we can use the command HELP to find out available commands</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span># HELP
NODE ADD &lt;hostname&gt; &lt;port&gt; [token] - Add new node
NODE DEL &lt;node number&gt; - Remove a node
NODE INFO &lt;node number&gt; - View node info
NODE LIST - List nodes
NODE LOCK &lt;node number&gt; - Stop forwarding tasks to this node
NODE UNLOCK &lt;node number&gt; - Resume forwarding tasks to this node
NODE UPDATE - Update all nodes info
NODE BEST &lt;number of images&gt; - Show best node for the number of images
ROUTE INFO &lt;taskId&gt; - Find route information for task
ROUTE LIST [node number] - List routes
TASK LIST [node number] - List tasks
TASK INFO &lt;taskId&gt; - View task info
TASK OUTPUT &lt;taskId&gt; [lines] - View task output
TASK CANCEL &lt;taskId&gt; - Cancel task
TASK REMOVE &lt;taskId&gt; - Remove task
ASR VIEWCMD &lt;number of images&gt; - View command used to create a machine
!! - Repeat last command
</pre></div>
</div>
<p>If, for example, the NodeODM instance wasn’t active when ClusterODM started, we might list nodes and see something as follows</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># NODE LIST</span>
<span class="mi">1</span><span class="p">)</span> <span class="n">localhost</span><span class="p">:</span><span class="mi">3000</span> <span class="p">[</span><span class="n">offline</span><span class="p">]</span> <span class="p">[</span><span class="mi">0</span><span class="o">/</span><span class="mi">2</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">version</span> <span class="mf">1.5</span><span class="o">.</span><span class="mi">3</span><span class="o">&gt;</span> <span class="p">[</span><span class="n">L</span><span class="p">]</span>
</pre></div>
</div>
<p>To address this, we can start up our local node (if not already started), and then perform a <code class="docutils literal notranslate"><span class="pre">NODE</span> <span class="pre">UPDATE</span></code></p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># NODE UPDATE</span>
<span class="n">OK</span>
<span class="c1"># NODE LIST</span>
<span class="mi">1</span><span class="p">)</span> <span class="n">localhost</span><span class="p">:</span><span class="mi">3000</span> <span class="p">[</span><span class="n">online</span><span class="p">]</span> <span class="p">[</span><span class="mi">0</span><span class="o">/</span><span class="mi">2</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">version</span> <span class="mf">1.5</span><span class="o">.</span><span class="mi">3</span><span class="o">&gt;</span> <span class="p">[</span><span class="n">L</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="accessing-the-logs">
<h3>Accessing the Logs<a class="headerlink" href="#accessing-the-logs" title="Permalink to this headline">¶</a></h3>
<p>While a process is running, it is also possible to list the tasks, and view the task output</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># TASK LIST</span>
<span class="c1"># TASK OUTPUT &lt;taskId&gt; [lines]</span>
</pre></div>
</div>
</div>
<div class="section" id="autoscaling-clusterodm">
<h3>Autoscaling ClusterODM<a class="headerlink" href="#autoscaling-clusterodm" title="Permalink to this headline">¶</a></h3>
<p>ClusterODM also includes the option to autoscale on multiple platforms, including, to date, Amazon and Digital Ocean. This allows users to reduce costs associated with always-on instances as well as being able to scale processing based on demand.</p>
<p>To setup autoscaling you must:</p>
<ul class="simple">
<li>Have a functioning version of NodeJS installed and then install ClusterODM</li>
</ul>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">OpenDroneMap</span><span class="o">/</span><span class="n">ClusterODM</span>
<span class="n">cd</span> <span class="n">ClusterODM</span>
<span class="n">npm</span> <span class="n">install</span>
</pre></div>
</div>
<ul class="simple">
<li>Make sure docker-machine is installed.</li>
<li>Setup a S3-compatible bucket for storing results.</li>
<li>Create a configuration file for <a class="reference external" href="https://github.com/OpenDroneMap/ClusterODM/blob/master/docs/digitalocean.md">DigitalOcean</a> or <a class="reference external" href="https://github.com/OpenDroneMap/ClusterODM/blob/master/docs/aws.md">Amazon Web Services</a>.</li>
</ul>
<p>You can then launch ClusterODM with</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">node</span> <span class="n">index</span><span class="o">.</span><span class="n">js</span> <span class="o">--</span><span class="n">asr</span> <span class="n">configuration</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>You should see something similar to following messages in the console</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">info</span><span class="p">:</span> <span class="n">ASR</span><span class="p">:</span> <span class="n">DigitalOceanAsrProvider</span>
<span class="n">info</span><span class="p">:</span> <span class="n">Can</span> <span class="n">write</span> <span class="n">to</span> <span class="n">S3</span>
<span class="n">info</span><span class="p">:</span> <span class="n">Found</span> <span class="n">docker</span><span class="o">-</span><span class="n">machine</span> <span class="n">executable</span>
</pre></div>
</div>
<p>You should always have at least one static NodeODM node attached to ClusterODM, even if you plan to use the autoscaler for all processing. If you setup auto scaling, you can’t have zero nodes and rely 100% on the autoscaler. You need to attach a NodeODM node to act as the “reference node” otherwise ClusterODM will not know how to handle certain requests (for the forwarding the UI, for validating options prior to spinning up an instance, etc.). For this purpose, you should add a “dummy” NodeODM node and lock it</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">telnet</span> <span class="n">localhost</span> <span class="mi">8080</span>
<span class="o">&gt;</span> <span class="n">NODE</span> <span class="n">ADD</span> <span class="n">localhost</span> <span class="mi">3001</span>
<span class="o">&gt;</span> <span class="n">NODE</span> <span class="n">LOCK</span> <span class="mi">1</span>
<span class="o">&gt;</span> <span class="n">NODE</span> <span class="n">LIST</span>
<span class="mi">1</span><span class="p">)</span> <span class="n">localhost</span><span class="p">:</span><span class="mi">3001</span> <span class="p">[</span><span class="n">online</span><span class="p">]</span> <span class="p">[</span><span class="mi">0</span><span class="o">/</span><span class="mi">2</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">version</span> <span class="mf">1.5</span><span class="o">.</span><span class="mi">1</span><span class="o">&gt;</span> <span class="p">[</span><span class="n">L</span><span class="p">]</span>
</pre></div>
</div>
<p>This way all tasks will be automatically forwarded to the autoscaler.</p>
</div>
</div>
<div class="section" id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h2>
<p>The 3D textured meshes are currently not being merged as part of the workflow (only point clouds, DEMs and orthophotos are).</p>
<p>GCPs are fully supported, however, there needs to be at least 3 GCP points on each submodel for the georeferencing to take place. If a submodel has fewer than 3 GCPs, a combination of the remaining GCPs + EXIF data will be used instead (which is going to be less accurate). We recommend using the <code class="docutils literal notranslate"><span class="pre">image_groups.txt</span></code> file to accurately control the submodel split when using GCPs.</p>
</div>
<div class="section" id="acknowledgments">
<h2>Acknowledgments<a class="headerlink" href="#acknowledgments" title="Permalink to this headline">¶</a></h2>
<p>Huge props to Pau and the folks at Mapillary for their amazing contributions to OpenDroneMap through their OpenSfM code, which is a key component of the split-merge pipeline. We look forward to further pushing the limits of OpenDroneMap and seeing how big a dataset we can process.</p>
<p><a class="reference external" href="https://github.com/OpenDroneMap/docs/blob/publish/source/large.rst">Help edit these docs!</a></p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="resources.html" class="btn btn-neutral float-right" title="Additional References" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="outputs.html" class="btn btn-neutral" title="OpenDroneMap Outputs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, OpenDroneMap.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.9.9',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>